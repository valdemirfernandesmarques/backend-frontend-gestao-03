const mysql = require('mysql2/promise'); require('dotenv').config(); async function restaurar() { const conn = await mysql.createConnection({ host: 'banco-gestao-gestaoemdanca.j.aivencloud.com', port: 13908, user: 'avnadmin', password: process.env.DB_PASS, database: 'defaultdb', ssl: { rejectUnauthorized: false } }); try { await conn.query('SET FOREIGN_KEY_CHECKS = 0'); console.log('?? Recriando tabela escolas...'); await conn.query("CREATE TABLE IF NOT EXISTS `escolas` (`id` int NOT NULL AUTO_INCREMENT, `nome` varchar(255) NOT NULL, `isencaoAtiva` tinyint(1) DEFAULT '0', `logoUrl` varchar(255) DEFAULT NULL, `createdAt` datetime NOT NULL, `updatedAt` datetime NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;"); console.log('?? Limpando duplicatas restantes...'); await conn.query('DROP TABLE IF EXISTS Alunos'); await conn.query('DROP TABLE IF EXISTS Users'); await conn.query('DROP TABLE IF EXISTS Comissaos'); await conn.query('SET FOREIGN_KEY_CHECKS = 1'); console.log('? BANCO RESTAURADO! Agora a tabela escolas existe e as duplicatas sumiram.'); } catch (e) { console.error('? Erro:', e.message); } finally { await conn.end(); } } restaurar();  
